import{j as g}from"./jsx-runtime-D_zvdyIk.js";import{r as u}from"./iframe-BCkc3reA.js";import{H as k}from"./Header-DnMxVsP3.js";import{T as x}from"./TaskList-DAJguR42.js";const N=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`,D=n=>{if(typeof n=="string")return{id:N(),title:n,done:!1};const{id:s,title:a,done:r}=n||{};return{id:s??N(),title:a??"untitled",done:!!r}},L=n=>{const s=({seed:a=[],...r})=>{const[w,i]=u.useState(()=>Array.isArray(a)?a.map(D):[]),[m,l]=u.useState(!0),d=()=>{i(c=>[...c,{id:N(),title:"untitled",done:!1}])},f=c=>{i(t=>t.map(e=>e.id===c?{...e,done:!e.done}:e))},T=c=>{i(t=>t.filter(e=>e.id!==c))},y=(c,t)=>{i(e=>e.map(o=>o.id===c?{...o,title:t}:o))},A=()=>{l(c=>!c),i(c=>{const t=[...c];return t.sort((e,o)=>m?Number(o.done)-Number(e.done):Number(e.done)-Number(o.done)),t})};return g.jsx(k,{title:"Transient Tasks",onAddTask:d,onToggleSort:A,isSortAsc:m,children:g.jsx(n,{data:w,setData:i,onToggle:f,onDelete:T,onRename:y,...r})})};return s.displayName=`withTransientStorage(${n.displayName||n.name||"Component"})`,s},b="tasks-local",E=n=>{try{if(typeof window>"u"||!window.localStorage)return null;const s=window.localStorage.getItem(n);return s?JSON.parse(s):null}catch{return null}},I=(n,s)=>{try{if(typeof window>"u"||!window.localStorage)return;window.localStorage.setItem(n,JSON.stringify(s))}catch{}},p=(n,s)=>[...n].sort((a,r)=>s?Number(a.done)-Number(r.done):Number(r.done)-Number(a.done)),U=n=>{const s=({seed:a=[],storageKey:r=b,...w})=>{const[i,m]=u.useState(!0),[l,d]=u.useState(()=>{const t=E(r),e=Array.isArray(t)?t:Array.isArray(a)?a.map(D):[];return p(e,i)});u.useEffect(()=>{I(r,l)},[l,r]);const f=()=>{d(t=>p([...t,{id:N(),title:"untitled",done:!1}],i))},T=t=>{d(e=>p(e.map(o=>o.id===t?{...o,done:!o.done}:o),i))},y=t=>{d(e=>e.filter(o=>o.id!==t))},A=(t,e)=>{d(o=>o.map(S=>S.id===t?{...S,title:e}:S))},c=()=>{m(t=>{const e=!t;return d(o=>p(o,e)),e})};return g.jsx(k,{title:"Local Tasks",onAddTask:f,onToggleSort:c,isSortAsc:i,children:g.jsx(n,{data:l,setData:d,onToggle:T,onDelete:y,onRename:A,...w})})};return s.displayName=`withLocalStorage(${n.displayName||n.name||"Component"})`,s},$="tasks-session",j=n=>{try{if(typeof window>"u"||!window.sessionStorage)return null;const s=window.sessionStorage.getItem(n);return s?JSON.parse(s):null}catch{return null}},O=(n,s)=>{try{if(typeof window>"u"||!window.sessionStorage)return;window.sessionStorage.setItem(n,JSON.stringify(s))}catch{}},h=(n,s)=>[...n].sort((a,r)=>s?Number(a.done)-Number(r.done):Number(r.done)-Number(a.done)),R=n=>{const s=({seed:a=[],storageKey:r=$,...w})=>{const[i,m]=u.useState(!0),[l,d]=u.useState(()=>{const t=j(r),e=Array.isArray(t)?t:Array.isArray(a)?a.map(D):[];return h(e,i)});u.useEffect(()=>{O(r,l)},[l,r]);const f=()=>{d(t=>h([...t,{id:N(),title:"untitled",done:!1}],i))},T=t=>{d(e=>h(e.map(o=>o.id===t?{...o,done:!o.done}:o),i))},y=t=>{d(e=>e.filter(o=>o.id!==t))},A=(t,e)=>{d(o=>o.map(S=>S.id===t?{...S,title:e}:S))},c=()=>{m(t=>{const e=!t;return d(o=>h(o,e)),e})};return g.jsx(k,{title:"Session Tasks",onAddTask:f,onToggleSort:c,isSortAsc:i,children:g.jsx(n,{data:l,setData:d,onToggle:T,onDelete:y,onRename:A,...w})})};return s.displayName=`withSessionStorage(${n.displayName||n.name||"Component"})`,s},G=L(x),H=U(x),Y=R(x);export{H as L,Y as S,G as T};
