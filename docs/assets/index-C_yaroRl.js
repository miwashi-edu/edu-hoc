import{j as g}from"./jsx-runtime-D_zvdyIk.js";import{r as u}from"./iframe-DqL-CiGg.js";import{H as x}from"./Header-C2VxrEzH.js";import{T as D}from"./TodoList-DLyLzF3B.js";const N=()=>typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`${Date.now()}-${Math.random().toString(16).slice(2)}`,L=n=>{if(typeof n=="string")return{id:N(),title:n,done:!1};const{id:s,title:a,done:r}=n||{};return{id:s??N(),title:a??"untitled",done:!!r}},b=n=>{const s=({seed:a=[],...r})=>{const[w,i]=u.useState(()=>Array.isArray(a)?a.map(L):[]),[m,l]=u.useState(!0),d=()=>{i(c=>[...c,{id:N(),title:"untitled",done:!1}])},f=c=>{i(t=>t.map(e=>e.id===c?{...e,done:!e.done}:e))},T=c=>{i(t=>t.filter(e=>e.id!==c))},y=(c,t)=>{i(e=>e.map(o=>o.id===c?{...o,title:t}:o))},A=()=>{l(c=>!c),i(c=>{const t=[...c];return t.sort((e,o)=>m?Number(o.done)-Number(e.done):Number(e.done)-Number(o.done)),t})};return g.jsx(x,{title:"Transient Todos",onAddTask:d,onToggleSort:A,isSortAsc:m,children:g.jsx(n,{data:w,setData:i,onToggle:f,onDelete:T,onRename:y,...r})})};return s.displayName=`withTransientStorage(${n.displayName||n.name||"Component"})`,s},E="todos-local",I=n=>{try{if(typeof window>"u"||!window.localStorage)return null;const s=window.localStorage.getItem(n);return s?JSON.parse(s):null}catch{return null}},U=(n,s)=>{try{if(typeof window>"u"||!window.localStorage)return;window.localStorage.setItem(n,JSON.stringify(s))}catch{}},p=(n,s)=>[...n].sort((a,r)=>s?Number(a.done)-Number(r.done):Number(r.done)-Number(a.done)),$=n=>{const s=({seed:a=[],storageKey:r=E,...w})=>{const[i,m]=u.useState(!0),[l,d]=u.useState(()=>{const t=I(r),e=Array.isArray(t)?t:Array.isArray(a)?a.map(L):[];return p(e,i)});u.useEffect(()=>{U(r,l)},[l,r]);const f=()=>{d(t=>p([...t,{id:N(),title:"untitled",done:!1}],i))},T=t=>{d(e=>p(e.map(o=>o.id===t?{...o,done:!o.done}:o),i))},y=t=>{d(e=>e.filter(o=>o.id!==t))},A=(t,e)=>{d(o=>o.map(S=>S.id===t?{...S,title:e}:S))},c=()=>{m(t=>{const e=!t;return d(o=>p(o,e)),e})};return g.jsx(x,{title:"Local Todos",onAddTask:f,onToggleSort:c,isSortAsc:i,children:g.jsx(n,{data:l,setData:d,onToggle:T,onDelete:y,onRename:A,...w})})};return s.displayName=`withLocalStorage(${n.displayName||n.name||"Component"})`,s},j="todos-session",k=n=>{try{if(typeof window>"u"||!window.sessionStorage)return null;const s=window.sessionStorage.getItem(n);return s?JSON.parse(s):null}catch{return null}},O=(n,s)=>{try{if(typeof window>"u"||!window.sessionStorage)return;window.sessionStorage.setItem(n,JSON.stringify(s))}catch{}},h=(n,s)=>[...n].sort((a,r)=>s?Number(a.done)-Number(r.done):Number(r.done)-Number(a.done)),R=n=>{const s=({seed:a=[],storageKey:r=j,...w})=>{const[i,m]=u.useState(!0),[l,d]=u.useState(()=>{const t=k(r),e=Array.isArray(t)?t:Array.isArray(a)?a.map(L):[];return h(e,i)});u.useEffect(()=>{O(r,l)},[l,r]);const f=()=>{d(t=>h([...t,{id:N(),title:"untitled",done:!1}],i))},T=t=>{d(e=>h(e.map(o=>o.id===t?{...o,done:!o.done}:o),i))},y=t=>{d(e=>e.filter(o=>o.id!==t))},A=(t,e)=>{d(o=>o.map(S=>S.id===t?{...S,title:e}:S))},c=()=>{m(t=>{const e=!t;return d(o=>h(o,e)),e})};return g.jsx(x,{title:"Session Todos",onAddTask:f,onToggleSort:c,isSortAsc:i,children:g.jsx(n,{data:l,setData:d,onToggle:T,onDelete:y,onRename:A,...w})})};return s.displayName=`withSessionStorage(${n.displayName||n.name||"Component"})`,s},G=b(D),H=$(D),Y=R(D);export{H as L,Y as S,G as T};
